# charge_demo

## 一、系统建设解读

### 1.系统建设的目标

​  随着人们环境保护意识提升以及新能源汽车技术的发展，我国电动车持有量的不断上升。在波普特大学即我校中电动车用户的人群也越来越多，波普特大学在校园多处地点安装了电动车充电桩设施以便师生使用。

​  但在目前仅仅只有充电桩硬件存在的情况下，很多车主会找不到最近最好的充电桩地点，校园空间有限，但却因此耽误车主的时间甚至堵塞校内交通。对于管理者来说，也不能及时地发现充电桩问题，做到最快时间报修，造成了资源浪费和服务的缺失。因此如何智能化调度管理计费，以期给新能源汽车拥有者一个更好地提高服务，节省时间，也成了波普特大学管理者一个亟待解决的问题。

​  基于上述问题和需求，我们团队设计一个智能化的充电桩调度计费系统，分为管理端和用户端，充分解决上述问题，提高校园内的电动车充电桩使用效率和用户体验，降低了学校管理充电桩的难度。

#### 功能需求

​  因为系统分为用户端和管理端两部分，我们做出的系统力求在用户使用和企业管理端都能提供良好的服务，因此功能需求将分开书写。

**用户端**

1. 显示充电桩实时状态：展示充电桩可用性，提供充电速率和价格信息。用户需要能够快速地查看校园内充电桩的状态和可用性，例如，哪些充电桩正忙或已空闲，哪些充电桩正在进行维修或清洁，等等。用户需要能够查看不同充电桩的充电速率和价格信息，以便根据自己的需求选择最适合的充电桩。这些充电桩将以网格布局的形式显示出来，将以多种筛选以及排序方案展示。我们还可以提供一键规划最近可用充电桩功能，直接为用户导航选择最优方案。
2. 提供充电桩的位置信息：用户需要能够在地图上看到充电桩的位置，以便方便地找到离自己最近的充电桩。我们将接入百度地图api，可以根据点击地图上充电桩图标的方式或者在具体的充电桩信息中点击导航，自动生成最近的路线。
3. 显示充电记录和账单：用户需要能够查看自己的充电记录和账单，以便管理自己的充电消费和记录。
4. 提供预约充电和支付功能：用户需要能够通过系统预约充电时间，并能够方便地进行支付，以便减少充电排队的等待时间。
5. 提供用户反馈和建议的渠道：用户需要能够通过系统提供的反馈和建议渠道，向系统管理员反馈自己的使用体验和建议，以便不断改进系统的功能和服务。

**服务端**

1. 显示充电桩的实时状态和管理信息：管理员需要能够快速地查看充电桩的实时状态和管理信息，例如，哪些充电桩正在使用或空闲，哪些充电桩需要维修或清洁，等等。
2. 提供充电桩的配置和调度功能：管理员需要能够配置和调度充电桩，例如，设置充电价格和充电速率，调整充电桩的数量和位置，安排充电桩的维修和清洁等任务，以便最大程度地优化充电桩的利用率和用户体验。
3. 提供充电记录和账单管理功能：管理员需要能够查看和管理用户的充电记录和账单，以便管理充电消费和记录，确保系统运行的准确性和公正性。
4. 提供用户管理和权限控制功能：管理员需要能够管理和控制用户的访问权限和使用权限，以便保证系统的安全性和稳定性。
5. 提供数据统计和分析功能：管理员需要能够通过系统提供的数据统计和分析功能，了解系统的运行情况和用户行为，以便更好地管理和优化系统。
6. 提供故障和异常处理功能：管理员需要能够及时发现和处理系统的故障和异常情况，以便确保系统的稳定性和可靠性。
7. 提供客服反馈沟通系统：管理员需要能与客户即时通信，以便具体问题的解决和反馈。

#### 非功能性需求

1. 用户界面需求：
   + 界面设计应简洁易用，方便用户快速找到所需功能。
   + 界面应提供清晰的指示和提示，帮助用户了解当前状态和操作步骤。
   + 应支持微信支付方式，方便用户完成充电费用支付。
   + 应提供实时充电信息展示，让用户了解充电进度和费用情况。
2. 管理员界面需求：
   + 界面设计应简洁易用，方便管理员快速找到所需功能。
   + 应提供充电桩管理功能，包括查看充电桩状态、远程控制充电桩等。
   + 应提供数据统计和分析功能，帮助管理员了解充电桩使用情况和运营状况。
   + 应提供用户管理功能，包括查看用户信息、处理用户投诉等。
   + 应提供系统设置功能，包括设置计费规则、修改系统参数等。
3. 软硬件需求：
   + 开发环境：需要安装微信开发者工具，以及协同微信小程序进行开发的后端编程语言（如Pyhton）和相关库。
   + 服务器端：需要部署服务器端程序，用于处理用户请求和管理充电桩数据。
   + 接口支持：需要支持微信支付接口，以便用户通过微信完成支付。
4. 可靠性需求：
   + 系统应具有良好的容错能力，能够在出现异常情况时快速恢复正常运行。
   + 系统应具有数据备份和恢复功能，以防止数据丢失。
   + 系统应具有安全防护措施，防止非法访问和攻击。
   + 系统应具有稳定的运行性能，保证用户体验。
5. 性能需求：
   + 系统应具有快速响应能力，能够在短时间内处理用户请求。
   + 系统应具有良好的并发处理能力，能够同时处理多个用户请求。
   + 系统应具有高效的数据处理能力，能够快速完成数据查询和统计分析。
   + 系统应具有稳定的运行性能，保证长时间运行不出现卡顿或崩溃。
6. 软件成本消耗：
   + 开发工具：微信开发者工具和Python编程语言都是免费的，不需要额外成本。
   + 服务器端：需要购买或租用服务器或云服务，用于部署服务器端程序。
   + 接口支持：微信支付接口可能需要支付一定的费用。
7. 开发进度需求：
   + 需求分析：需要对系统需求进行详细分析，确定系统功能和性能指标。
   + 设计阶段：需要完成系统架构设计、界面设计和数据库设计等工作。
   + 编码阶段：需要完成服务器端程序和微信小程序的开发工作。
   + 测试阶段：需要对系统进行全面测试，确保系统功能正常、性能稳定。

### 2.系统建设的业务背景

​  随着电动汽车的普及，校内电动汽车数量不断增加，因此建设一套智能充电桩调度计费系统，以便使得电动车充电时间和排队时间达到最短的效果，是当前迫切需要解决的问题。

​  由于校内电动汽车充电需求量大、充电桩数量有限，存在排队等待时间过长、充电效率低下等问题。如果不对电动车充电进行有效调度，可能会导致校内交通拥堵、充电桩闲置浪费等问题。因此，建设一套智能充电桩调度计费系统可以有效地解决这些问题，提高电动车充电效率和用户体验，同时也有利于减少能源浪费和环境污染，符合可持续发展的理念和目标。

#### 业务流程

1. 用户进入系统后先使用自己的微信账号进行登录，如果最近登录过，则直接进入主界面
2. 在主界面查看充电桩的相关信息，根据当前的充电桩的状态，如可用状态、充电桩功率等，选择合适的充电桩，同时系统也会对所有的充电桩根据用户经常使用的充电桩类型，结合距离远近等因素对所有当前可用充电桩进行排序，以便用户进行选择
3. 用户选中充电桩后跳转到地图界面，如果用户已经在充电桩旁，则可以直接进行下单与支付，如果距离较远，用户可以选择导航，系统将调用百度地图API进行导航，系统将为其推荐距离最近的路线，用户也可以自行调整路线。同时，用户也可以选择预约该充电桩，减少排队等待的时间
4. 用户到达充电桩之后，可以扫描二维码或者输入充电桩编号进行身份验证
5. 在下单的界面，用户可以选择需要的充电方式（如快充或慢充），在将充电枪头插入车辆充电口后，充电桩开始充电
6. 在充电的过程中，用户在订单界面可以查看当前的订单状态，包括当前已充电量和费用等
7. 在充电结束之后，系统将会向用户发送通知，提醒用户订单已完成，同时提示用户进行支付，支付完成之后，订单结束
8. 用户可以在个人信息界面进行历史订单的查看和反馈意见的提交

### 3.系统的国内外现状

​  充电桩是新能源汽车时代重要基础设施。新能源汽车充电桩指为新能源电动汽车提供充电服务的设备装置，安装于公共楼宇、停车场、商场、运营车充电站等公共场所及居民 小区等私人场所。充电桩常见分类：以安装条件划分，主要分为立式充电桩和壁挂充电桩；以服务对象划分，主要分为公共充电桩、专用充电桩和私人充电桩；以充电接口的数量划分，主要分为一桩一充和一桩多充；以充电类型划分，主要分为交流充电桩和直流充电桩。交流充电桩与直流充电桩。交流充电桩通过电动汽车内置的“车载充电机”将电网的交流电转换为直流电后对电池充电，输出电流小，充电速度慢。直流充电桩内置大功率直流充电模块，将电网的交流电转换为直流电，直流充电桩输出的电压和电流调整范围大，可以实现快充。

​  欧美、日本等发达国家已经形成了较为成熟的电动车充电基础设施建设体系，已经出现了不少电动车充电桩调度计费系统，如欧洲联合电动汽车协会开发的“ChargeMap”和美国车载充电桩运营商ChargePoint公司开发的“ChargePoint”等。这些系统已经具备了较为完善的智能调度、计费结算、用户管理等功能，为用户提供了更为方便、快捷、安全的充电服务。

​  而在我国，“充电云”是国内最早开发的电动车充电桩调度计费系统之一，具备了充电预约、电动车接入、充电调度、计费结算、客户服务等多种功能，可以为用户提供全面的充电服务。特来电则是国内领先的电动车充电桩商业运营商之一，拥有众多的充电站点和充电桩，其开发的充电桩调度计费系统也具备了智能调度、计费结算、用户管理等功能，能够为用户提供便捷的充电服务。

​  根据中国电动汽车充电基础设施促进联盟数据，2017年我国充电桩市场规模为72亿元，到2021年达到418.7亿元，复合年均增长率高达42.2%。从运营企业分布来看，我国电动汽车充电桩行业主要运营企业包括：星星充电、特来电、国家电网、云快充、南方电网、依威能源、汇充电、深圳车电网、上汽安悦、万马爱充等。新能源车快速发展对充电桩需求的增长结合“新基建”与“稳增长”等政策的支持与补贴，有望推动新能源充电桩行业维持较高增长率。目前，国内充电桩受政策及行业技术、新能源汽车的普及等综合因素影响，未来3-5年都将处在一个快速成长阶段。

​  

## 二、系统建设的技术路线

### 1.系统整体框架描述

1. 定义系统需要实现的功能，如用户注册、登录、充电桩预约、充电桩的智能调度、充电计费支付等。
2. 设计系统的数据模型，包括用户信息、充电桩信息、订单信息、账单信息等，并建立相应的MySQL数据库表。
3. 使用SQLAlchemy等ORM框架操作MySQL数据库，提供Flask RESTful接口供微信小程序调用。
4. 使用微信原生开发框架（如微信小程序开发工具、IDE等）编写前端页面和逻辑代码，调用Flask提供的RESTful接口获取数据。
5. 实现微信小程序上的在线支付功能，可使用第三方支付API（如微信支付）。
6. 针对充电桩的管理和调度，可以使用Python编写相关算法和程序，通过Flask提供的后台管理界面进行配置和控制。
7. 将小程序打包发布到微信公众平台进行测试和上线。

整个系统需要涵盖前后端开发、数据库设计和管理、接口开发和测试等多个方面，而使用微信原生开发框架、Flask以及MySQL数据库则需要考虑如何处理数据的存取和传输，以及如何实现算法和程序控制充电桩的管理和调度。同时，需要注意小程序的性能和用户体验，以便提供更好的服务。

### 2.技术路线和特点

1. 前端技术路线：微信原生开发框架（如wepy、mpvue等）或微信小程序开发工具及IDE。 前端特点：基于微信原生开发框架和组件库进行开发，能够提供丰富的UI展示效果和交互体验。同时，由于微信小程序是在微信客户端中运行，因此可以方便地实现一些微信相关功能，如分享、登录、支付等。另外，代码部署简单，可直接发布到小程序平台上。

2. 后端技术路线：Flask Web框架 + Python编写RESTful接口。 后端特点：基于Python语言进行开发，拥有广泛的库和生态系统，可以轻松处理数据存储、计算和业务逻辑等问题。同时，基于Web框架提供的RESTful接口，可以方便地与前端进行交互和通信，并支持多种数据格式和协议。此外，Python还支持并发编程和异步IO等特性，可以提高系统的性能和吞吐量。

3. 数据存储技术路线：关系型数据库MySQL、ORM框架SQLAlchemy等。 数据存储技术特点：基于关系型数据库系统，支持ACID事务和复杂查询等操作，能够保证数据的可靠性和一致性。ORM框架可以将对象映射到数据库表中，简化了数据访问的过程，提高了开发效率。此外，MySQL还支持分布式部署和高可用架构，可以满足系统的扩展和容错需求。

### 3.可行性研究

1. 前端：选择微信原生开发框架进行开发，在小程序客户端中运行，能够提供良好的用户体验和交互效果。同时，由于本次作业的前端功能较为简单，仅需实现基本的页面展示和数据获取，因此微信原生开发框架已经足够满足需求。难点在于小程序官方文档较为繁琐，需要花费一定的时间去学习和理解。

2. 后端：选择Flask框架编写RESTful接口，Python语言具有简洁明了、易于阅读等特点，并且Flask拥有轻量级、灵活配置等优势，非常适合开发小型项目。此外，ORM框架SQLAlchemy也具有多种特性和优化手段，可以帮助提高数据操作的效率和可靠性。难点在于需要熟悉Python语言的语法和相关库函数，并理解RESTful接口的设计原则。

3. 数据库：选择MySQL关系型数据库进行数据存储，因为它具有ACID事务、复杂查询等特点，能够保证数据的一致性和可靠性。同时，使用ORM框架SQLAlchemy可以将对象映射到数据库表中，简化了数据访问的过程，提高了开发效率。难点在于需要熟练掌握MySQL的基本语句和操作方法，以及理解ORM框架的设计思想和使用方法。

​  本次作业选择的技术路线相对简单，易于入门，但仍需要花费一定的时间和精力去学习和理解。除此之外，还需要注意代码规范、模块分离、异常处理等问题，以保证系统的质量和健壮性。

## 工程说明

### 开发语言说明

#### 前端

开发语言：HTML、CSS、JavaSript

#### 后端

### 开发环境说明

#### 前端

操作系统：Windows 11 22H2
开发环境：Visual Studio Code
版本：1.78.2

#### 后端

### 数据库软件说明

数据库软件：
版本号：

### 软件安装部署说明
